### doorbell.yaml
doorbell:
  alias: Ring Doorbell
  sequence:
    - service: media_player.sonos_snapshot
      data:
        entity_id:
          - media_player.kitchen
          - media_player.master_bedroom
          - media_player.study
    - service: media_player.sonos_join
      data:
        master: media_player.study
        entity_id:
          - media_player.kitchen
          - media_player.master_bedroom
          - media_player.study
    - service: media_player.play_media
      data:
        entity_id: media_player.study # the group master
        media_content_id: http://10.0.26.20/sounds/doorbell.mp3
        media_content_type: music
    - service: media_player.volume_set
      data:
        entity_id:
          - media_player.study
          - media_player.kitchen
          - media_player.master_bedrom
        volume_level: 0.50
    - delay:
        seconds: 4
    - service: media_player.sonos_unjoin
      data:
        entity_id:
          - media_player.kitchen
          - media_player.master_bedroom
          - media_player.study
    - service: media_player.sonos_restore
      data:
        entity_id:
          - media_player.kitchen
          - media_player.master_bedroom
          - media_player.study

## only required to simulate the action the doorbell being pushed - via input_boolean.sonos_goup_test
sonos_goup_test:
  alias: Sonos Group test
  sequence:
    - service: media_player.sonos_snapshot
      data:
        entity_id:
          - media_player.kitchen
          - media_player.master_bedroom
          - media_player.study
    - service: media_player.sonos_join
      data:
        master: media_player.study
        entity_id:
          - media_player.kitchen
          - media_player.master_bedroom
          - media_player.study
    - service: media_player.play_media
      data:
        entity_id: media_player.study # the group master
        media_content_id: http://10.0.26.20/sounds/doorbell.mp3
        media_content_type: music
    - service: media_player.volume_set
      data:
        entity_id:
          - media_player.study
          - media_player.kitchen
          - media_player.master_bedrom
        volume_level: 0.50
    - delay:
        seconds: 4
    - service: media_player.sonos_unjoin
      data:
        entity_id:
          - media_player.kitchen
          - media_player.master_bedroom
          - media_player.study
    - service: media_player.sonos_restore
      data:
        entity_id:
          - media_player.kitchen
          - media_player.master_bedroom
          - media_player.study
