### sensors.yaml
- platform: version
- platform: mqtt
  name: "Darren's Mood"
  state_topic: "home/darren/mood"
  payload_on: "good"
  payload_off: "bad"
  device_class: heat
- platform: plex
  host: !secret plexserver_ip
  username: !secret plexserver_uname
  password: !secret plexserver_pass
- platform: qnap
  host: !secret qnap_ip
  username: !secret qnap_uname
  password: !secret qnap_pass
  monitored_conditions:
    - status
    - cpu_usage
    - memory_percent_used
    - network_tx
    - volume_percentage_used
- platform: systemmonitor
  resources:
    - type: disk_free
      arg: /home
    - type: disk_use
      arg: /home
    - type: disk_use_percent
      arg: /home
    - type: processor_use
    - type: memory_free
    - type: processor_use
    - type: last_boot
    - type: since_last_boot
    - type: memory_use_percent
    - type: memory_use
    - type: memory_free
    - type: swap_use_percent
    - type: swap_use
    - type: swap_free
    - type: network_in
      arg: eno1 # not eth0
    - type: network_out
      arg: eno1
- platform: speedtest
  server_id: 2629
  monitored_conditions:
    - ping
    - download
    - upload
  minute: 30
  hour:
    - 0
    - 4
    - 8
    - 12
    - 16
    - 20
- platform: google_travel_time
  name: GTDarren_Home
  api_key: !secret google_maps_api_key
  origin: device_tracker.darren
  destination: zone.home
- platform: google_travel_time
  name: GTBlythe_Home
  api_key: !secret google_maps_api_key
  origin: device_tracker.blythe
  destination: zone.home
- platform: google_travel_time
  name: GTHome_Work
  api_key: !secret google_maps_api_key
  origin: zone.home
  destination: zone.work
- platform: google_travel_time
  name: GTHome_City
  api_key: !secret google_maps_api_key
  origin: zone.home
  destination: zone.city
- platform: google_travel_time
  name: GTHome_Thornton
  api_key: !secret google_maps_api_key
  origin: zone.home
  destination: zone.mdn
- platform: google_travel_time
  name: GTHome_Wangi
  api_key: !secret google_maps_api_key
  origin: zone.home
  destination: zone.mdr
- platform: google_travel_time
  name: GTDom_Airport
  api_key: !secret google_maps_api_key
  origin: zone.home
  destination: zone.domairport
- platform: google_travel_time
  name: GTInt_Airport
  api_key: !secret google_maps_api_key
  origin: zone.home
  destination: zone.intairport
- platform: filesize
  file_paths:
    - /home/homeassistant/.homeassistant/home-assistant_v2.db
- platform: apcupsd
  resources:
    - bcharge
    - linev
    - loadpct
    - nominv
    - nompower
    - numxfers
    - outputv
    - status
    - timeleft
    - tonbatt

# templates
- platform: template
  sensors:
    template_x5_xdrive30d_remaining_fuel:
      friendly_name: "Fuel remaining"
      unit_of_measurement: "L"
      value_template: >
        {{"{:,}".format(states('sensor.x5_xdrive30d_remaining_fuel')|int)}}
#      icon_template: >-
#          {% if is_state('sun.sun', 'above_horizon') %}
#            mdi:weather-sunny
#          {% else %}
#            mdi:weather-night
#          {% endif %}
    template_x5_xdrive30d_mileage:
      friendly_name: "Odometer"
      unit_of_measurement: "kms"
      value_template: >
        {{"{:,}".format(states('sensor.x5_xdrive30d_mileage')|int)}}
    template_x5_xdrive30d_remaining_range_fuel:
      friendly_name: "Fuel Range"
      unit_of_measurement: "kms"
      value_template: >
        {{"{:,}".format(states('sensor.x5_xdrive30d_remaining_range_fuel')|int)}}
    template_nursery_air_quality:
      friendly_name: "Air Quality"
      unit_of_measurement: "State"
      value_template: "{%if states.sensor.nursery_air_quality.state == '1' %}Good{% elif states.sensor.nursery_air_quality.state == '2' %}Fair{% elif states.sensor.nursery_air_quality.state == '3' %}Poor{% elif states.sensor.nursery_air_quality.state == '4' %}Very Poor{% endif %}"
    template_calendar_family:
      value_template: >
        {{ strptime(states.calendar.family.attributes.start_time, "%Y-%m-%d %H:%M:%S").strftime("%a %I:%M%p") }}:
        {{ states.calendar.family.attributes.message }}
      friendly_name: 'Family'
      unit_of_measurement: ''
    template_calendar_bin_nights:
      unit_of_measurement: 'Wed'
      friendly_name: 'Bin night'
      value_template: >
        {{ states.calendar.bin_nights.attributes.message }}
      entity_picture_template: >
        {% if states.calendar.bin_nights.attributes.message == 'Red Yellow Green Bins' %}
          /local/images/ryg.jpg
        {% elif states.calendar.bin_nights.attributes.message == 'Red Blue Bins' %}
          /local/images/rb.jpg
        {% endif %}
#      friendly_name_template: >
#        {% if states.calendar.bin_nights.attributes.message == 'Red Yellow Green Bins' %}
#          Red Yellow Green
#        {% elif states.calendar.bin_nights.attributes.message == 'Red Blue Bins' %}
#          Red Blue
#        {% endif %}

## original template for above       {{ strptime(states.calendar.family.attributes.start_time, "%Y-%m-%d %H:%M:%S").strftime("%A, %d of %B, at %H:%M") }}:
    template_gthome_thornton:
      value_template: "{{ states.sensor.gthome_thornton.attributes.duration_in_traffic }}"
      friendly_name: 'Thornton'
      unit_of_measurement: ''
    template_gthome_wangi:
      value_template: "{{ states.sensor.gthome_wangi.attributes.duration_in_traffic }}"
      friendly_name: 'Wangi Wangi'
      unit_of_measurement: ''
    template_solar_angle:
      friendly_name: "Sun Angle"
      unit_of_measurement: 'Â°'
      value_template: "{{ '%+.1f'|format(states.sun.sun.attributes.elevation) }}"
#templates for device sensors
    template_homeassistant_db:
      friendly_name: "HA Database Size"
      unit_of_measurement: 'MB'
      value_template: >
        {{"{:,}".format(states('sensor.homeassistant_v2db')|int)}}

#    net_power:
#      friendly_name_template: >-
#        {% if states('sensor.power_consumption')|float < 0 %}
#          Power Consumption
#        {% else %}
#          Power Production
#        {% end %}
#      value_template: "{{ states('sensor.power_consumption') }}"
#      unit_of_measurement: 'kW'
