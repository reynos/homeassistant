### house_mode.yaml automation

## Automated Select Scenes - House modes Evening, Night and Day (Bedtime and Holiday only called manually)

- alias: Set Evening mode at Sunset
  trigger:
    platform: numeric_state
    entity_id: sun.sun
    value_template: "{{ state.attributes.elevation }}"
    # Can be a positive or negative number
    below: 2.0
  action:
    service: script.turn_on
    data_template:
      entity_id: >
        {% if states.input_select.house_mode.state == 'Holiday' %}
          script.evening_holiday
        {% else %}
          script.evening
        {% endif %}
- alias: Set Inside Lights at Dusk
  trigger:
    platform: numeric_state
    entity_id: sensor.light_sensor_61 # this updates fom the Z-wave sensor every 5mins?
    below: 150
  action:
    service: light.turn_on
    entity_id:
      - light.kitchen_bench_7
      - light.lounge_lamp_3
      - light.stairs_16

- alias: Auto Set Night mode
  trigger:
    platform: time
    at: '22:30:00'
  action:
    service: script.turn_on
    data_template:
      entity_id: >
        {% if states.input_select.house_mode.state == 'Holiday' %}
          script.night_holiday
        {% else %}
          script.night
        {% endif %}

- alias: Set Day mode
  trigger:
    platform: time
    at: '05:30:00'
  action:
    service: script.turn_on
    data_template:
      entity_id: >
        {% if states.input_select.house_mode.state == 'Holiday' %}
          script.day_holiday
        {% else %}
          script.day
        {% endif %}
#    service: input_select.select_option
#    data:
#      entity_id: input_select.house_mode
#      option: 'Day'

- alias: "House Mode Bedtime"
  trigger:
    platform: state
    entity_id: input_select.house_mode
    to: 'Bedtime'
  action:
    service: script.turn_on
    data:
      entity_id: script.bedtime

- alias: "House Mode Evening"
  trigger:
    platform: state
    entity_id: input_select.house_mode
    to: 'Evening'
  action:
    - service: frontend.set_theme
      data:
        name: night
    - service: scene.turn_on
      entity_id: scene.evening

- alias: "House Mode Day"
  trigger:
    platform: state
    entity_id: input_select.house_mode
    to: 'Day'
  action:
    service: script.turn_on
    entity_id: script.day

- alias: "House Mode Night"
  trigger:
    platform: state
    entity_id: input_select.house_mode
    to: 'Night'
  action:
    - service: script.turn_on
      entity_id: script.night

- alias: "House Mode Holiday"
  trigger:
    platform: state
    entity_id: input_select.house_mode
    to: 'Holiday'
  action:
    - service: notify.ios_Darren
      data:
        message: "Holiday mode set"
        data:
          push:
            badge: 5
          subtitle: "Mode"

- alias: "House Mode Holiday Off"
  trigger:
    platform: state
    entity_id: input_select.house_mode
    from: 'Holiday'
  action:
    - service: notify.ios_Darren
      data:
        message: "Holiday mode OFF"
        data:
          push:
            badge: 5
          subtitle: "Mode"
    - service: input_boolean.turn_off
      entity_id: input_boolean.evening_holiday

- alias: "House Mode SydneyFC"
  trigger:
    platform: state
    entity_id: input_select.house_mode
    to: 'Sydney FC Game'
  action:
    service: scene.turn_on
    entity_id: scene.sydneyfc
